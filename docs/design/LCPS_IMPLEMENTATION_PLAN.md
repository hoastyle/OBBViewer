# LCPS 观测调试工具 - 详细实施计划

**版本**: 1.0
**创建日期**: 2025-12-24
**父文档**: [LCPS综合设计方案](LCPS_COMPREHENSIVE_DESIGN.md)

## 实施路线图

```
Phase 1 (MVP)      Phase 2 (调试)    Phase 3 (高级)      Phase 4 (C++ QT)
    2周                3周              3周                 6周
    │                  │                │                   │
    ├─ 基础观测         ├─ 数据回放       ├─ 插件架构         ├─ mmtoolkit2集成
    ├─ 数据录制         ├─ 异常检测       ├─ ML检测           ├─ QT界面
    ├─ 3D渲染          ├─ 性能分析       ├─ 自动化测试        ├─ 性能优化
    └─ 基础HUD         └─ 报告生成       └─ 完整配置系统      └─ 部署方案
```

---

## Phase 1: MVP（2周）

### 1.1 目标

- 实现实时观测LCPS防护状态
- 支持基础数据录制
- 交付可用的Python原型

### 1.2 任务分解

| 任务 | 负责人 | 工时 | 依赖 | 验收标准 |
|------|--------|------|------|---------|
| **Week 1** |
| 1.1 数据接收框架 | 开发A | 16h | - | OBB+PC+Status三通道接收 |
| 1.2 数据同步器 | 开发A | 8h | 1.1 | 时间戳对齐，误差<50ms |
| 1.3 HDF5录制器 | 开发B | 12h | - | 支持zstd压缩，录制正常 |
| 1.4 3D渲染（复用） | 开发B | 8h | 1.1 | 复用recvOBB.py代码 |
| **Week 2** |
| 1.5 基础HUD（ImGui） | 开发A | 12h | 1.2 | 显示FPS、数据流状态 |
| 1.6 配置系统 | 开发B | 8h | - | YAML配置文件 |
| 1.7 单元测试 | 开发A+B | 8h | All | 覆盖率>70% |
| 1.8 集成测试 | 开发A+B | 8h | All | 端到端测试通过 |
| 1.9 文档编写 | 开发A+B | 4h | All | README+安装指南 |

**交付物**：
- ✅ lcps_observer_mvp.py（可执行）
- ✅ 配置文件示例
- ✅ 录制文件示例（HDF5）
- ✅ 测试报告

**验收标准**：
1. 能够同时接收OBB、点云、状态数据
2. 数据时间戳对齐，误差<50ms
3. 录制功能正常，压缩率≥70%
4. 3D渲染稳定30 FPS
5. HUD显示实时状态

---

## Phase 2: 调试功能（3周）

### 2.1 目标

- 支持数据回放和时间轴控制
- 实现漏报/误报检测
- 提供性能分析和报告生成

### 2.2 任务分解

| 任务 | 负责人 | 工时 | 依赖 | 验收标准 |
|------|--------|------|------|---------|
| **Week 3** |
| 2.1 HDF5回放器 | 开发A | 16h | Phase1 | 支持播放/暂停/跳转 |
| 2.2 时间轴UI | 开发B | 12h | 2.1 | ImGui时间轴控件 |
| 2.3 漏报检测器 | 开发A | 16h | Phase1 | 检测率≥90% |
| **Week 4** |
| 2.4 误报检测器 | 开发A | 12h | 2.3 | 误报率<5% |
| 2.5 生命周期监控 | 开发B | 8h | 2.3 | 状态转换检测 |
| 2.6 性能分析器 | 开发B | 12h | Phase1 | 点云密度、OBB统计 |
| **Week 5** |
| 2.7 报告生成器 | 开发A | 12h | 2.3-2.6 | HTML/PDF报告 |
| 2.8 异常聚合器 | 开发B | 8h | 2.3-2.5 | 去重，减少噪音 |
| 2.9 集成测试 | 开发A+B | 8h | All | 端到端测试 |
| 2.10 用户测试 | QA | 8h | All | 用户反馈收集 |

**交付物**：
- ✅ 回放功能（支持1x~10x速度）
- ✅ 异常检测报告（HTML）
- ✅ 用户手册

**验收标准**：
1. 回放功能流畅，支持快进/快退
2. 漏报检测率≥90%
3. 误报率<5%
4. 生成的报告清晰易懂

---

## Phase 3: 高级功能（3周）

### 3.1 目标

- 实现插件化架构
- 支持用户自定义检测规则
- 完整的配置和测试系统

### 3.2 任务分解

| 任务 | 负责人 | 工时 | 依赖 | 验收标准 |
|------|--------|------|------|---------|
| **Week 6** |
| 3.1 插件框架 | 开发A | 20h | Phase2 | 动态加载插件 |
| 3.2 插件示例 | 开发A | 8h | 3.1 | 2个示例插件 |
| 3.3 配置验证器 | 开发B | 8h | 3.1 | 配置错误提示 |
| **Week 7** |
| 3.4 ML异常检测（可选） | 开发A | 16h | Phase2 | 基于历史数据 |
| 3.5 自动化测试框架 | 开发B | 12h | Phase2 | pytest+coverage |
| 3.6 性能优化 | 开发A+B | 12h | All | CPU<10%, 内存<500MB |
| **Week 8** |
| 3.7 插件开发文档 | 开发A | 8h | 3.1 | 完整API文档 |
| 3.8 用户手册v2 | 开发B | 8h | All | 包含插件开发 |
| 3.9 回归测试 | QA | 12h | All | 所有功能测试通过 |

**交付物**：
- ✅ 生产级Python工具
- ✅ 插件开发SDK
- ✅ 完整文档

**验收标准**：
1. 插件系统稳定，支持热加载
2. 自动化测试覆盖率>80%
3. 性能满足要求
4. 文档完整

---

## Phase 4: C++ QT版本（6周）

### 4.1 目标

- 基于mmtoolkit2的高性能版本
- 完整的QT图形界面
- 生产部署方案

### 4.2 任务分解（简化）

| Week | 主要任务 | 交付物 |
|------|---------|--------|
| Week 9-10 | 架构迁移、mmtoolkit2集成 | C++核心框架 |
| Week 11-12 | QT界面开发 | 完整UI |
| Week 13 | 性能优化、压力测试 | 性能报告 |
| Week 14 | 打包部署、用户培训 | 部署方案 |

**验收标准**：
1. 处理能力：点云50K点@30Hz稳定运行
2. 内存占用<200MB
3. 支持Windows/Linux跨平台

---

## 风险和缓解

| 风险 | 缓解措施 |
|------|---------|
| icrane LCPS接口变更 | 提前协调，定义稳定接口 |
| HDF5性能瓶颈 | 异步写入，批量提交 |
| C++迁移成本高 | Python充分验证，渐进迁移 |

---

## 资源需求

| 角色 | 人数 | 时间 |
|------|------|------|
| Python开发 | 2人 | 8周（Phase 1-3）|
| C++/QT开发 | 2人 | 6周（Phase 4）|
| QA | 1人 | 4周（Part-time）|

---

**版本历史**：
- v1.0 (2025-12-24): 初始版本
