# LCPS 黑匣子调试系统 - 文档索引

**文档版本**: 1.0
**创建日期**: 2025-12-25
**状态**: 设计完成

---

## 📚 文档列表

本文档集合包含LCPS黑匣子调试系统的完整设计、实施和评估文档。

### 核心文档

1. **[LCPS调试功能评估报告](LCPS_DEBUG_EVALUATION.md)** ✅ 已完成
   - 当前调试功能盘点（7项功能）
   - 关键缺陷分析（5个严重缺陷）
   - 综合评分：55/100
   - 优化方向总结

2. **[LCPS适配性改动分析](LCPS_ADAPTATION_ANALYSIS.md)** ✅ 已完成
   - 实际代码分析（ZMQ、OBB、PCL、状态管理）
   - 适配改动清单（4个数据通道）
   - 工作量评估：16.5人时（2-3人天）
   - 实施路线图（3个Phase）

3. **[LCPS黑匣子设计概要](LCPS_BLACKBOX_SUMMARY.md)** ✅ 已完成
   - 架构设计（4层架构）
   - 8个创新功能（环形缓冲、智能异常检测等）
   - 实施路线图（3个Phase，8-11周）
   - 成本效益分析（ROI显著）

### 详细设计文档（参考前述咨询内容）

以下内容已在咨询过程中详细阐述，可根据需要整理为独立文档：

4. **黑匣子功能详细规范**
   - 功能1: 环形缓冲 + 异常前后录制
   - 功能2: 智能异常检测引擎（8类异常）
   - 功能3: 分层数据录制策略
   - 功能4: 决策过程回溯（Decision Trace）
   - 功能5: 嵌入式性能监控
   - 功能6: 智能存储管理
   - 功能7: 实时流+离线录制双模式
   - 功能8: 自动化异常报告生成

5. **黑匣子实施计划**
   - Phase 1: 核心黑匣子功能（3-4周）
   - Phase 2: 高级功能（3-4周）
   - Phase 3: 智能优化（2-3周）
   - 总计：8-11周，1-2人

6. **架构决策记录（ADR）**
   - ADR-009: LCPS多端口发布架构
   - ADR-010: 点云下采样策略（VoxelGrid Filter）
   - ADR-011: 黑匣子环形缓冲架构
   - ADR-012: 异常检测触发策略

---

## 🎯 快速导航

### 按角色查看

**管理层**:
- [评估报告](LCPS_DEBUG_EVALUATION.md) - 了解当前问题和ROI
- [黑匣子概要](LCPS_BLACKBOX_SUMMARY.md) - 了解解决方案和成本

**架构师**:
- [适配性分析](LCPS_ADAPTATION_ANALYSIS.md) - 了解技术可行性
- [黑匣子概要](LCPS_BLACKBOX_SUMMARY.md) - 了解系统架构

**开发工程师**:
- [适配性分析](LCPS_ADAPTATION_ANALYSIS.md) - 详细实施代码
- 前述咨询内容 - 功能详细规范和代码示例

### 按主题查看

**问题识别**:
- [评估报告 § 关键缺陷分析](LCPS_DEBUG_EVALUATION.md#关键缺陷分析)

**解决方案**:
- [黑匣子概要 § 架构设计](LCPS_BLACKBOX_SUMMARY.md#架构设计)
- 咨询内容 § 创新功能设计

**实施指导**:
- [适配性分析 § 实施方案](LCPS_ADAPTATION_ANALYSIS.md#详细实施方案)
- 咨询内容 § 实施路线图

---

## 📊 关键数据

### 当前状况

- **调试功能完备性**: 55/100
- **关键缺陷**: 5个（异常前数据缺失、手动触发、文件碎片化、无性能数据、决策不透明）
- **LCPS已有基础设施**: 80%（ZMQ Publisher、OBB发布、压缩、非阻塞发送）

### 适配改动

- **工作量**: 16.5人时（2-3人天）
- **优先级**: P0（OBB+状态通道）→ P1（点云通道）→ P2（图像通道）
- **性能开销**: CPU <10%, 内存 ~12MB

### 黑匣子系统

- **开发周期**: 8-11周
- **团队规模**: 1-2人
- **性能开销**: 常态CPU <2%, 内存 ~450MB
- **ROI**: 调试效率提升10倍+

---

## 🚀 实施建议

### 推荐路径

```bash
# Phase 1: 快速见效（2周）
1. 实施LCPS适配改动（OBB+状态通道）
   → 立即支持实时观测

# Phase 2: 黑匣子核心（4周）
2. 实现环形缓冲 + 异常触发
3. 实现HDF5存储 + 基础报告
   → 异常自动录制，完整上下文

# Phase 3: 高级功能（4周）
4. 实现决策路径回溯
5. 实现性能监控 + 软异常检测
   → 决策可解释，性能可监控

# Phase 4: 智能优化（3周）
6. 实现预测异常检测
7. 集成OBBViewer工具
   → 预防性监控，统一平台
```

### 下一步行动

```bash
# 立即执行
/wf_01_planning "更新PLANNING.md添加LCPS适配和黑匣子系统章节"
/wf_02_task update "创建Phase 1-3任务清单"

# 开始实施
/wf_05_code "实现LCPS状态通道发布功能"
```

---

## 📝 文档维护

### 版本历史

- v1.0 (2025-12-25): 初始版本，包含评估、适配分析、黑匣子概要
- 待更新: 详细功能规范、实施计划、ADR文档

### 贡献者

- 架构设计：Sequential-thinking分析
- 代码审查：LCPS实际代码分析
- 需求评估：基于实际调试场景

### 相关资源

- 原始咨询记录：完整的10步Sequential-thinking分析
- LCPS源代码：`~/Workspace/Project/MM/gitlab_icrane2_build_optimize/src/service/LCPS/`
- OBBViewer工具：`~/Workspace/Project/MM/OBBViewer/`

---

**文档创建**: 2025-12-25
**最后更新**: 2025-12-25
**状态**: 设计阶段完成，待进入实施阶段
